<!DOCTYPE html>
<html lang="id">
<head>
   <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xzyo Store - Joki Blox Fruit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0072ff;
            --dark-bg: #0b1220;
            --card-bg: #111a33;
            --text-white: #ffffff;
            --neon-shadow: 0 0 15px rgba(0, 114, 255, 0.7);
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        
        body {
            background: var(--dark-bg);
            color: var(--text-white);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .wrapper {
            max-width: 1000px;
            width: 100%;
        }

        h2 { text-align: center; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 2px; }
        p.subtitle { text-align: center; color: #7cc7ff; margin-bottom: 20px; }

        .btn {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: none;
            margin-top: 15px;
            background: linear-gradient(90deg, #020617, #0b3c8a, #020617);
            background-size: 200% auto;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            display: block;
            font-size: 16px;
        }

        .btn:hover, .btn:active {
            transform: scale(1.03);
            box-shadow: 0 0 25px rgba(0, 114, 255, 0.8);
            background-position: right center;
        }

        .container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-top: 20px;
        }

        .left-side {
            flex: 1;
            position: sticky;
            top: 20px;
            min-width: 320px;
        }

        .right-side {
            flex: 1.2;
            min-width: 320px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #1e293b;
            margin-top: 10px;
            background: #0b1220;
            color: white;
            outline: none;
        }

        input:focus { border-color: var(--primary-blue); }

        .section-title {
            margin-top: 20px;
            font-weight: bold;
            color: var(--primary-blue);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }

        .price-list { list-style: none; padding: 0; margin: 0; }
        .price-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 14px;
        }

        .old-p { text-decoration: line-through; color: #ff4d4d; font-size: 12px; }
        .new-p { color: #00c6ff; font-weight: 800; font-size: 15px; }
        /* --- VIP LIST STYLE MEWAH --- */
        .vip-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.03); border-bottom: 1px solid #222; }
        .crown-mewah { color: var(--gold); text-shadow: 0 0 10px gold; font-size: 18px; }
        .check-mewah { color: #00ff88; text-shadow: 0 0 10px #00ff88; font-size: 16px; margin-left: 5px; }

        /* --- ANIMASI ASLI KAMU --- */
        .checkmark-wrapper { width: 100px; height: 100px; margin: 0 auto 20px; display: block; }
        .checkmark-circle, .checkmark-kick { fill: none; stroke: #00ff88; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; }
        .active .checkmark-circle { stroke-width: 3; stroke-dasharray: 166; stroke-dashoffset: 166; animation: drawStroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards; }
        .active .checkmark-kick { stroke-width: 5; stroke-dasharray: 48; stroke-dashoffset: 48; animation: drawStroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.6s forwards; }
        @keyframes drawStroke { 100% { stroke-dashoffset: 0; } }
        #order-slide { flex-direction: column; justify-content: center; align-items: center; text-align: center; }

        .section-title { margin-top: 20px; font-weight: bold; color: var(--primary-blue); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .price-list { list-style: none; padding: 0; margin: 0; }
        .price-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; }
        .new-p { color: #00c6ff; font-weight: 800; }
    </style>
</head>
<body>

<div class="wrapper">
    <h2>XZYO STORE</h2>
    <p class="subtitle">DIJAMIN AMAN MURAH DAN TERPERCAYA</p>
    
   <button type="button" class="btn" onclick="window.open('https://whatsapp.com/channel/0029VbCFZEm5kg7DZoIDgG3r','_blank')">
        <i class="fa-brands fa-whatsapp"></i> TESTIMONI? CEK DI SINI LEKKU
    </button>
    
    <div class="container">
        <div class="left-side">
            <div class="card" id="formCard">
                <iframe name="frame_gaib" style="display:none;"></iframe>
                <form id="orderForm" action="https://formsubmit.co/xzyostore@gmail.com" method="POST" target="frame_gaib" enctype="multipart/form-data">
                    <input type="hidden" name="_captcha" value="false">
                    <input type="hidden" name="_subject" id="email_subject" value="Pesanan Joki & Update VIP">
                    
                    <h3 style="margin:0; font-size:16px; color:var(--primary-blue);">DATA ORDER JOKI</h3>
                    
                    <input type="text" name="Username" id="usernameInput" placeholder="Username Roblox" required oninput="autoFillWA(this.value)">
                    
                    <div style="position:relative;">
                        <input type="password" name="Password" id="pw" placeholder="Password Roblox" required>
                        <i id="eye" class="fa-solid fa-eye-slash" onclick="togglePw()" style="position:absolute; right:12px; top:22px; cursor:pointer; color:#555;"></i>
                    </div>

                    <input type="text" name="WhatsApp" id="waInput" placeholder="Nomor WA (Aktif)" required>
                    <textarea name="Jenis Joki" placeholder="Contoh: Joki Level 1500 - MAX" rows="2" required></textarea>
                    
                    <input type="number" name="Nominal Joki" id="nominalInput" placeholder="Nominal Joki (Contoh: 20000)" required>
                    
                    <button type="submit" class="btn">ORDER & MASUK LIST VIP</button>
                </form>

                <div id="order-slide" style="display: none;">
                    <div class="checkmark-wrapper">
                        <svg class="checkmark-svg" viewBox="0 0 52 52">
                            <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="checkmark-kick" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                        </svg>
                    </div>
                    <h3 style="color: #00ff88;">ORDER TERKIRIM LEK!</h3>
                    <p style="font-size:13px;">Data sudah masuk email & Leaderboard.</p>
                </div>
            </div>

            <div class="card">
                <h3 style="margin:0; text-align:center; font-size:16px; color:gold;"><i class="fa-solid fa-crown"></i> TOP SULTAN XZYO</h3>
                <div id="vipListData" style="margin-top:15px; font-size:14px;">Memuat data...</div>
            </div>
        </div>

        <div class="right-side">
            <div class="card">
                <h3 style="margin:0; text-align:center;">METODE BAYAR</h3>
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-top:10px; font-size:14px;">
                    DANA : <b>089677329404</b><br>
                    GOPAY/OVO : <b>089517154561</b>
                </div>
                <button class="btn" onclick="window.open('https://wa.me/6289692310378?text=Admin%20minta%20QRIS')">SCAN QRIS</button>
                
                <div class="section-title">List Harga Populer</div>
                <ul class="price-list">
                    <li>Level 1500 - MAX <span class="new-p">17k</span></li>
                    <li>God Human <span class="new-p">25.5k</span></li>
                    <li>Race V4 All Race <span class="new-p">8.5k</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyC6aUjN60bSDE0BLVs3V-yNRYfSsPv0ZV8",
        authDomain: "xzyostore-66448.firebaseapp.com",
        databaseURL: "https://xzyostore-66448-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "xzyostore-66448",
        appId: "1:547146618223:web:978b8956cc0293cfb7449a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let allUsers = {};

    // Ambil data awal untuk Auto-fill
    db.ref('sultan').on('value', (s) => {
        allUsers = s.val() || {};
        updateLeaderboard(allUsers);
    });

    // FUNGSI AUTO FILL WA
    function autoFillWA(name) {
        if (allUsers[name]) {
            document.getElementById('waInput').value = allUsers[name].whatsapp;
        }
    }

    // FORM SUBMIT HANDLER
    document.getElementById("orderForm").addEventListener("submit", function(e){
        const user = document.getElementById("usernameInput").value;
        const wa = document.getElementById("waInput").value;
        const nominal = parseInt(document.getElementById("nominalInput").value);

        // 1. UPDATE FIREBASE (Leaderboard)
        const ref = db.ref('sultan/' + user);
        ref.once('value').then((snap) => {
            const d = snap.val() || { total: 0, count: 0 };
            ref.update({
                total: d.total + nominal,
                count: d.count + 1,
                whatsapp: wa
            });
        });

        // 2. ANIMASI ASLI KAMU
        let form = this;
        let slide = document.getElementById("order-slide");
        form.style.opacity = "0";
        setTimeout(() => {
            form.style.display = "none";
            slide.style.display = "flex";
            slide.classList.add("active");
        }, 300);
        
        // FormSubmit akan jalan otomatis lewat target frame_gaib
    });

    // UPDATE LEADERBOARD MEWAH
    function updateLeaderboard(data) {
        const container = document.getElementById('vipListData');
        container.innerHTML = "";
        const sorted = Object.keys(data).sort((a,b) => data[b].total - data[a].total);

        sorted.forEach((name, i) => {
            const u = data[name];
            // Mahkota Mewah (Joki >= 5)
            const crown = u.count >= 5 ? '<i class="fa-solid fa-crown crown-mewah"></i>' : '';
            // Ceklis Mewah (Total >= 100k)
            const check = u.total >= 100000 ? '<i class="fa-solid fa-circle-check check-mewah"></i>' : '';
            
            container.innerHTML += `<div class="vip-item">
                <span>${i+1}. ${crown} <b>${name}</b> ${check}</span>
                <span style="color:#00ff88; font-weight:bold;">Rp ${u.total.toLocaleString()}</span>
            </div>`;
        });
    }

    function togglePw() {
        let pw = document.getElementById("pw");
        let eye = document.getElementById("eye");
        pw.type = pw.type === "password" ? "text" : "password";
        eye.classList.toggle("fa-eye");
        eye.classList.toggle("fa-eye-slash");
    }
</script>

</body>
</html>
